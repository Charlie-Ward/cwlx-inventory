{% extends "base.html" %}

{% block content %}
  <h1>Inventory Items</h1>
  <form method="get" class="mb-3">
    <select name="category" class="form-select" onchange="this.form.submit()">
      <option value="">All Categories</option>
      {% for value, label in categories %}
        <option value="{{ value }}" {% if selected_category == value %}selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
  </form>
  <ul>
    {% for product in products %}
      <li>
        <strong>{{ product.name }}</strong> ({{ product.category }})<br>
        {% for item in product.items.all %}
          - Barcode: {{ item.barcode }} {% if not item.is_available %}(Assigned){% endif %}<br>
        {% endfor %}
      </li>
    {% empty %}
      <li>No items found.</li>
    {% endfor %}
  </ul>
{% endblock %}
